
\subsection{Shape Initialization}
\label{sec:initialization}
 
%\cxj{re-write this section. Describe clearly about the parameters, the objective, and methods. }
%In this section we explain the reason why using a specific angle to each fold edge, and constructing our initialized model. 
Initially, assume that the 2D layout $\mathcal{L}$ lies on the $XOY$ plane, so that each vertex $\mathbf{v}_i(x_i,y_i,z_i)$ in $V$ has $z_i=0$. 
Each panel in $P$ has a normal $\mathbf{n}_i=(0,0,1)^T$. 
To construct the 3D model, we can compute the 3D coordinates of all vertexes. 
%
A general process of folding a carton by humans starts from folding each edge by a rough angle and then connecting close vertexes to obtain a box-like shape. 
Naturally, we first fold the 2D layout by assigning a rotation angle to each pair of adjacent panels to get a rough shape, instead of directly computing the vertex coordinates.
%The basic idea is to interpret the folded state of a box as a series of rotation angles along each edge, and by setting specific value of angles which is $\pi/2$, we can have a rough model to assist the later optimization.
%	
Observed from existing designs on the Internet, most of the traditional cartons are cuboid for holding files or delivering daily supplies. 
Although there is a recent trend to design more complicated layouts to attract consumers, the shape of these unusual cartons is similar to boxes as their functions are still packaging commodity. 
%
Therefore, we choose $\pi/2$ as the initial value of the rotation angle to each folding edge. 
%
First, a panel graph of a layout is constructed, as shown in Figure~\ref{fig:midresult} (a).
Each panel is a node, and there is an edge between two panels if they are connected by a folding edge.
%
All panels in the 2D layout are recursively folded in a breadth-first manner.
Starting from the panel with the maximal area, our system folds all its adjacent panels by rotating them around their connecting edge by $\pi/2$, and then continues to others. 
Figure~\ref{fig:midresult} illustrates the folding process of a cuboid carton. 

\begin{figure}
	\centering
	\includegraphics[width=0.9\textwidth]{images/midresult}
	\caption{A rough 3D shape is obtained by folding each edge between a pair of adjacent panels by $\pi/2$ in the 2D layout (a) in a breadth-first manner, starting from the panel with the maximal area. (b), (c), (d) and (e) are the different folding stages in the initialization step.}
	\label{fig:midresult}
\end{figure}



Traditional cartons in cuboid shapes could reach an ideal state.
Figure~\ref{fig:initial-automatic} shows a group of results that are generated by simply folding adjacent panels by $\pi/2$.
%
However, many complicated designs still need refinement, such as the four examples in Figure~\ref{fig:initial-need-improvement}. 
Take the hexagonal box as an example, the 3D model can be improved by simply snapping the small glue flaps to their nearby side panels \reply{to ensure the carton is stable without any manual intervention. Most of these cases occur for attaching a glue flap to a side panel to make a closed box in practice.}
%
As a result, we develop a suggestive interface that automatically detects potential geometric modifications from the rough carton shape and provides these suggestions for users to explore.
%interactively allow users to add these constrains into our system and optimize to a desired model, as described in the following section.

\begin{figure}
	\centering
	\includegraphics[width=0.8\textwidth]{images/initiala}
	\caption{Four examples of carton models that can be fully automatically generated from 2D layouts by folding each edge with a fixed angle $\pi/2$. }
	\label{fig:initial-automatic}
\end{figure}

 
\begin{figure}
	\centering
	\includegraphics[width=0.8\textwidth]{images/initialb}
	\caption{Four examples of the carton models that need more shape improvement. While the shapes are not cuboid, using a fixed angle $\pi/2$ leads to non-closed shapes and loose structures.}
	\label{fig:initial-need-improvement}
\end{figure}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
